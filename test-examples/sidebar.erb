<aside
  data-controller="sidebar"
  data-action="click@window->sidebar#outside"
  class="sidebar fixed top-0 left-0 z-[9998] w-72 transform border-r bg-white transition-transform duration-300 dark:bg-black dark:border-gray-800 xl:static xl:transform-none flex h-screen flex-col px-5">
  <div class="sidebar-header flex items-center justify-center pt-8 pb-7">
    <a href="/admin">
      <span class="logo">
        <%= image_tag "logo.png", class: "h-12 w-auto", alt: "Integrar Plus" %>
      </span>
    </a>
  </div>

  <div class="no-scrollbar flex flex-col duration-300 ease-linear">
    <nav>
      <div class="mb-8">
        <h3 class="mb-4 text-xs leading-[20px] text-gray-400 uppercase">
          <span class="menu-group-title">

          </span>
        </h3>

        <ul class="flex flex-col gap-2">
          <% menu_items.each do |item| %>
            <li>
              <% if item[:type] == 'dropdown' %>
                <div class="dropdown-container" data-controller="dropdown">
                  <button
                    type="button"
                    data-action="click->dropdown#toggle"
                    class="menu-item group flex items-center justify-between w-full <%= 'active' if item[:active] %>"
                  >
                    <div class="flex items-center gap-3">
                      <%= item[:icon].html_safe %>
                      <span class="menu-item-text">
                        <%= item[:title] %>
                      </span>
                    </div>
                    <svg class="w-4 h-4 transition-transform duration-200" data-dropdown-target="arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                  </button>

                  <div
                    data-dropdown-target="panel"
                    class="hidden"
                  >
                    <% item[:items].each do |subitem| %>
                      <% if user_can_access?(subitem[:permission]) %>
                        <a
                          href="<%= subitem[:path] %>"
                          class="menu-item <%= 'active' if subitem[:active] %>"
                        >
                          <%= subitem[:icon].html_safe %>
                          <span class="menu-item-text">
                            <%= subitem[:title] %>
                          </span>
                        </a>
                      <% end %>
                    <% end %>
                  </div>
                </div>
              <% else %>
                <a
                  href="<%= item[:path] %>"
                  class="menu-item group <%= 'active' if item[:active] %>"
                >
                  <%= item[:icon].html_safe %>
                  <span class="menu-item-text">
                    <%= item[:title] %>
                  </span>
                </a>
              <% end %>
            </li>
          <% end %>
        </ul>
      </div>
    </nav>
  </div>
</aside>

<div
  data-sidebar-target="overlay"
  class="fixed inset-0 z-40 bg-gray-900/50 hidden xl:hidden transition-opacity duration-300"
></div>
